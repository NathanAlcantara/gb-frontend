<div class="centralize" style="margin-top: 15px;">
   <div>
      <mat-form-field>
         <input (keyup)="applyFilter($event.target.value)" matInput placeholder="Filter">
      </mat-form-field>
   </div>

   <div style="text-align: end; flex-basis: 65%">
      <a (click)="addProduct()" color="accent" mat-mini-fab>
         <mat-icon>add</mat-icon>
      </a>
   </div>
</div>

<div class="centralize">
   <div *ngIf="isLoading" class="example-loading-shade">
      <mat-spinner></mat-spinner>
   </div>

   <div *ngIf="!isLoading" class="mat-elevation-z8" style="width: 75%; background: white">
      <n-empty-state
         [isEmpty]="gridData && gridData.length === 0"
         [isError]="hasError"
         firstTitleEmpty="Não encontramos nenhum registro,"
         firstTitleError="Ocorreu um erro inesperado,"
         secondTitleEmpty="por favor cadastre um novo produto."
         secondTitleError="por favor contate o administrador."
      ></n-empty-state>

      <div *ngIf="!hasError && gridData.length !== 0">
         <table *ngIf="!isLoading" [dataSource]="gridData" mat-table matSort>

            <ng-container matColumnDef="code">
               <th *matHeaderCellDef mat-header-cell> Código</th>
               <td *matCellDef="let row" mat-cell> {{row.code}} </td>
            </ng-container>

            <ng-container matColumnDef="name">
               <th *matHeaderCellDef mat-header-cell mat-sort-header> Nome</th>
               <td *matCellDef="let row" mat-cell> {{row.name}} </td>
            </ng-container>

            <ng-container matColumnDef="productType">
               <th *matHeaderCellDef mat-header-cell mat-sort-header> Tipo de produto</th>
               <td *matCellDef="let row" mat-cell> {{row.productType}} </td>
            </ng-container>

            <ng-container matColumnDef="actualPrice">
               <th *matHeaderCellDef mat-header-cell mat-sort-header> Preço atual</th>
               <td *matCellDef="let row" mat-cell> {{ converterCurrency(row.actualPrice) }} </td>
            </ng-container>

            <ng-container matColumnDef="paymentType">
               <th *matHeaderCellDef mat-header-cell> Forma de pagamento</th>
               <td *matCellDef="let row" mat-cell> {{row.paymentType}} </td>
            </ng-container>

            <ng-container matColumnDef="numberOfParcels">
               <th *matHeaderCellDef mat-header-cell mat-sort-header> Número de parcelas</th>
               <td *matCellDef="let row" mat-cell> {{row.numberOfParcels}} </td>
            </ng-container>

            <ng-container matColumnDef="valueOfParcel">
               <th *matHeaderCellDef mat-header-cell mat-sort-header> Valor de cada parcela</th>
               <td *matCellDef="let row" mat-cell> {{ converterCurrency(row.valueOfParcel) }} </td>
            </ng-container>

            <ng-container matColumnDef="actions">
               <th *matHeaderCellDef mat-header-cell> Ações</th>
               <td *matCellDef="let row" mat-cell>
                  <button (click)="editProduct(row._id)" mat-raised-button> Editar</button>
               </td>
            </ng-container>

            <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
            <tr *matRowDef="let row; columns: displayedColumns;" mat-row></tr>
         </table>

         <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
      </div>
   </div>
</div>
